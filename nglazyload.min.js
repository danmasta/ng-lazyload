!function(n,e){"use strict";var t=e.module("ngLazyload",[]);t.provider("lazyload",[function(){var n={adaptive:!1,size:!1,classes:!0};this.get=function(e){return e?n[e]:n},this.set=function(r){return e.extend(n,r)},this.$get=["$q","$window","$log",function(r,t,i){function a(n){return n.charAt(0).toUpperCase()+n.substring(1)}function u(r,t){var i={};if(r)for(var o=Object.keys(n),u=0;u<o.length;u++){var s="lazyload"+a(o[u]);r[s]&&(i[o[u]]=r[s])}return e.extend({},n,i,t)}function s(n,e){for(var r=Object.keys(e),t=0;t<r.length;t++)n.toggleClass(r[t],e[r[t]])}function c(n,e,r){if(e){var t=n.split("."),i=[t.splice(-2,1),r||"-",e].join("");t.splice(-1,0,i),n=t.join(".")}return n}function f(n){var e=t.innerWidth,r=768>e?"xs":992>e?"sm":1200>e?"md":"";return c(n,r)}function l(n){var e=r.defer(),t=new Image;return t.onload=function(){e.resolve(t)},t.onerror=function(){e.reject(n)},t.src=n,e.promise}function v(n){var e=r.defer(),t=f(n);return l(t).then(function(n){e.resolve(n)},function(){l(n).then(function(n){e.resolve(n)},function(){e.reject(n)})}),e.promise}function d(n,e){/img/i.test(n[0].nodeName)?n[0].src=e.src:n.css({backgroundImage:["url(",e.src,")"].join("")})}function g(n,e,r){if(!/img/i.test(n[0].nodeName)){if(/true|auto/i.test(r.size)){var t=e.width,i=e.height,o=9/16>i/t?"100% auto":i>t?"auto 100%":"cover";r.size=o}n.css({backgroundSize:r.size})}}function h(n,e,r,t){var t=u(r,t),o=t.adaptive?v(n):l(n);return t.classes&&(s(e,{loading:!0,error:!1}),o.then(null,function(){s(e,{error:!0})}),o.finally(function(){s(e,{loading:!1})})),o.then(function(n){d(e,n),g(e,n,t)},function(n){i.warn("img not found",n)}),o}function p(n,e){return e?h.apply(null,arguments):l(n)}return p}]}]),t.service("preload",["lazyload","$q",function(n,e){return function(r){for(var t=[],i=0;i<r.length;i++)t.push(n(r[i]));return e.all(t)}}]),t.directive("lazyload",["lazyload",function(n){return{compile:function(){return function(e,r,t){t.$observe("lazyload",function(e){e&&n(e,r,t)})}}}}])}(window,window.angular);